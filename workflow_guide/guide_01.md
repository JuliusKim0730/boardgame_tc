1\. 게임 진행 규칙 코드 설계  
제공된 UI 구조와 게임 규칙을 반영한 주요 모듈 및 함수 설계를 제안합니다.

1.1. ⚙️ 초기 설정 (Initial Setup)  
항목	변수/데이터 구조	설명	UI 반영 위치  
게임 상태	game\_state: { day: 1, max\_day: 14, current\_player\_id: '1112312', is\_game\_started: true, is\_turn\_phase: 'MOVE' }	현재 진행 일수, 턴 주체 등을 관리.	Day 1 / 14  
플레이어 목록	players: \[{ id: '1112312', tc: 3000, location: 1, determination\_token: 1, cards\_in\_hand: \[\], ... }, ...\]	모든 플레이어의 상태를 관리.	플레이어 목록  
개인 정보	player\_data: { tc: 3000, location: 1, token\_status: '1/2', special\_stats: { taste: 0, history: 0, nature: 0, culture: 0, leisure: 0, watersports: 0, memory: 0 } }	현재 턴 플레이어의 상세 정보.	내 정보  
여행지 카드	tr\_card: { id: 'TR3', name: '부산', weights: { W: 3, T: 2, L: 1 } }	플레이어가 뽑은 여행지 카드의 목표 가중치.	(UI에 직접 노출되지 않음, 내부 데이터)  
공동 목표	shared\_goal: { target\_tc: 10000, current\_tc: 0, card\_id: 'G1', effect: '...' }	현재 공동 목표 진행 상황.	공동 계획

Sheets로 내보내기

1.2. 🏗️ 게임 준비 세팅 (Game Setup Logic)  
게임 시작 시 한 번 실행되는 로직.

함수: initialize\_game(player\_count, is\_2\_player\_mode)

Deck 초기화: 모든 카드 덱(TR, F, T/H/N/C/L/W, J, Y, CH)을 섞어 준비합니다.

플레이어 객체 생성: 각 플레이어에게 초기 자금 3,000TC와 결심 토큰 1개를 할당합니다.

말 배치: 모든 말을 \*\*1번 칸 (무료 계획)\*\*에 배치합니다.

카드 분배:

여행지 카드 (TR): 각 플레이어에게 1장씩 뽑아 공개합니다. (목표 가중치 설정)

일반 계획 카드 (T/H/N/C/L/W): 각 플레이어에게 1장씩 뽑아 손에 듭니다 (cards\_in\_hand).

공동 목표 (Goal): 1장을 뽑아 공개합니다. (예: 목표 10,000TC 설정)

선 플레이어 결정: 임의로 정합니다.

1.3. 🏃‍♂️ 게임 진행 (Turn Flow Logic)  
매 턴마다 순차적으로 실행되는 핵심 로직.

함수: start\_player\_turn(player\_id)

game\_state.is\_turn\_phase \= 'MOVE'

UI 활성화: 현재 플레이어에게 이동 가능한 인접 칸을 하이라이트합니다.

이동 (① 이동):

제약 확인: last\_acted\_location과 연결된 칸만 선택 가능합니다.

이동 처리: player\_data.location을 업데이트합니다.

game\_state.is\_turn\_phase \= 'ACTION'

행동 (② 행동):

도착한 칸(player\_data.location)의 행동 칸 설명에 따른 효과를 1회 적용합니다.

예시 (3번 집안일): draw\_card('J\_DECK') → 카드 효과 (+1,500/2,000TC) 즉시 적용.

2인 특칙 적용: 2인 모드에서 3번 칸 첫 방문 시 \+500TC 추가.

last\_acted\_location 업데이트.

game\_state.is\_turn\_phase \= 'OPTIONAL\_ACTION'

추가 행동 (③ 추가 행동 \- 선택):

결심 토큰 사용 확인: 플레이어가 토큰 사용을 선택했는지 확인합니다.

카드 효과 확인: CH18/CH19 등 추가 행동 카드가 사용되었는지 확인합니다.

사용 시:

제약 확인: last\_acted\_location과 동일한 칸은 선택 불가.

행동 처리: 원하는 1\~5번 칸 또는 현재 칸에서 행동 1회 수행.

game\_state.is\_turn\_phase \= 'END\_TURN'

다음 턴으로 전환: game\_state.current\_player\_id를 다음 플레이어로 변경.

7일차 회복 확인: 7일차 시작 시 결심 토큰 회복 로직 실행 (7.1. 규칙).

14일차 종료 확인: 14일차 모든 턴 완료 시 finalize\_game() 호출.

1.4. 🔢 행동 칸 로직 설계 (Action Space Logic)  
칸 번호	이름	함수/로직	상세 설명  
1번	무료 계획	perform\_free\_plan()	F-Deck에서 1장 뽑아 즉시 특성/추억 점수 적용 (F1: 맛+1, 추억+2 등).  
2번	조사하기	perform\_investigation()	T/H/N/C/L/W-Deck에서 1장 뽑아 손에 든다. (구매 아님)  
3번	집안일	perform\_housework()	J-Deck에서 1장 뽑아 즉시 TC 수익 적용. (2인 첫 방문 시 \+500TC 추가)  
4번	여행 지원	perform\_support\_card()	Y-Deck에서 1장 뽑아 즉시 TC 변동 효과 적용.  
5번	찬스	perform\_chance\_card(is\_2p\_mode)	CH-Deck에서 1장 뽑아 즉시 효과 적용. (2인: CH11/12/13 제거. 선택 B: \+500TC 획득 가능).  
6번	자유 행동	perform\_free\_action(chosen\_space)	1\~5번 칸 중 1개를 선택하여 해당 행동 함수 호출. (last\_acted\_location 제약 동일 적용).

Sheets로 내보내기

2\. AI 행동 규칙 및 방법 설계  
AI 봇은 \*\*자신의 여행지 카드(목표)\*\*를 기반으로 최종 행복 점수를 극대화하는 방향으로 움직이도록 설계합니다.

2.1. 🧠 AI 전략 모듈 (AI Strategy Module)  
AI는 턴 시작 시 다음 2단계의 판단 과정을 거쳐 최적의 행동을 결정합니다.

Step 1: 목표 가중치 분석 (Goal Analysis)  
AI는 자신의 여행지 카드와 현재 TC를 기반으로 핵심 목표 특성을 결정합니다.

핵심 목표 특성: 여행지 카드의 가중치 x3, x2 특성.

현재 TC 상태:

TC 부족 (TC \< 6,000): 수익 확보를 최우선 목표로 전환.

TC 충분 (TC \> 6,000): 계획 카드 수집 및 공동 목표 기여를 주요 목표로 설정.

추억 점수: 비주류 특성 3점 → 추억 1점 변환이 가능하므로, TC가 충분할 경우 비주류 계획 카드 수집도 고려합니다.

Step 2: 칸별 매력도 계산 (Action Space Utility Calculation)  
AI는 각 칸에 대해 \*\*'매력도 점수 (Utility Score)'\*\*를 계산하여 가장 높은 칸으로 이동합니다. 직전 턴 행동 칸은 선택지에서 제외됩니다.

칸 번호	전략 목표별 매력도 점수 계산 로직  
3번 (집안일)	(TC 부족 시) \+10점 ∣ (TC 충분 시) \+2점. ∣ (2인 첫 방문 시) \+3점 추가.  
4번 (여행 지원)	(TC \< 3,000) \+8점 (수익 카드 기대) ∣ (TC \> 10,000) \+5점 (지출/수익 균형)  
2번 (조사하기)	(핵심 목표 특성 계획이 손에 3장 미만 시) \+7점 ∣ (손에 6장 이상 시) \-5점 (포화)  
1번 (무료 계획)	(추억 \< 5점 시) \+6점 (추억 점수 보충) ∣ (핵심 목표 특성 포함 시) \+4점 추가.  
5번 (찬스)	(현재 선두 플레이어) \+4점 (경쟁/방해 카드 기대) ∣ (최하위 플레이어) \+6점 (캐치업 카드 기대) ∣ (2인 모드, TC 부족 시) \+6점 (500TC 획득 선택)  
6번 (자유 행동)	가장 매력적인 1\~5번 칸의 매력도 점수 \+1점 (유연성 보너스)

Sheets로 내보내기

2.2. 🚀 AI 행동 결정 프로세스 (AI Turn Decision)  
1\. 이동 결정 (Movement)  
최적의 이동 칸 선택: 6개 칸 중 매력도 점수가 가장 높은 칸으로 이동합니다.

강제 이동 예외 처리: 찬스 카드 등으로 강제 이동된 경우, 해당 칸에서 행동을 수행합니다.

2\. 행동 수행 (Action)  
선택된 칸에서 규칙에 따라 행동을 수행합니다.

2번 (조사하기) 칸: 뽑은 일반 계획 카드가 핵심 목표 특성을 포함할 경우 보유합니다. 아닐 경우, TC 상황과 변환 가능성을 고려하여 보유/버림을 결정합니다.

3\. 추가 행동 (Optional Action \- 결심 토큰)  
사용 조건:

현재 TC가 10,000TC 이상이거나, 결승선(14일차)이 가까울 때 (Day 10 이후).

이동한 칸이 매우 비효율적이었으나, 직전에 행동하지 않은 매력도 높은 칸이 존재할 때.

사용 시 선택: 직전 행동 칸을 제외한, 매력도 점수가 가장 높은 칸을 선택하여 행동을 수행합니다.

2.3. 🌟 최종 결산 로직 (Final Scoring Logic)  
함수: finalize\_ai\_score(player\_id)

일반 계획 카드 구매 (9.1.):

우선순위: 여행지 x3, x2 가중치 특성을 가진 카드를 무조건 구매합니다.

비주류/추억 카드: TC가 남았을 경우, 추억 점수가 높은 카드와 비주류 특성을 가진 카드 중 TC 대비 효율이 높은 카드를 구매합니다.

공동 목표 기여 (9.2.):

기여 금액:

기본: 현재 TC의 20% 기여.

성공 확신 시: 남은 목표 TC / 남은 플레이어 수 \+ 1,000TC 기여.

실패 시 패널티(3\~5인) 회피: 가장 적게 기여할 것으로 예상되는 금액보다 1TC 더 기여. (2인 모드에서는 패널티 면제)

비주류 특성 변환 (9.3.):

무조건 변환: 가중치 x1 특성 점수가 3점 이상일 경우, 모든 3점 단위를 추억 \+1로 변환합니다. (추억 점수는 승리 동률 시 1순위 판단 기준이므로 변환을 선호)

최종 점수 계산 (9.4.): final\_happiness\_score 계산.