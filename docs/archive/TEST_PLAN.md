# 🧪 보드게임 테스트 계획

## 📊 현재 상태 요약

### ✅ 완료된 항목
- 백엔드 서비스 로직 95% 완성
- 프론트엔드 UI 컴포넌트 구조 완성
- v4.1 업데이트 코드 작성 완료
- API 엔드포인트 구현 완료

### ⚠️ 확인 필요 항목
1. **데이터베이스 연결**: Supabase 호스트 연결 실패
2. **마이그레이션 실행**: v4.1 스키마 업데이트 필요
3. **카드 데이터 시드**: 107장 카드 데이터 삽입 필요
4. **서버 실행 테스트**: 백엔드/프론트엔드 동시 실행

---

## 🔍 테스트 단계

### Phase 1: 환경 설정 확인 ✅
- [x] Node.js 설치 확인 (v22.19.0)
- [x] npm 설치 확인 (10.9.3)
- [x] 백엔드 의존성 설치 확인
- [x] 프론트엔드 의존성 설치 확인
- [ ] 데이터베이스 연결 확인

### Phase 2: 데이터베이스 설정 ⏳
- [ ] Supabase 연결 정보 확인
- [ ] 데이터베이스 연결 테스트
- [ ] 스키마 마이그레이션 실행
- [ ] 카드 데이터 시드 실행

### Phase 3: 백엔드 테스트 ⏳
- [ ] 서버 시작 (포트 4000)
- [ ] Health check 엔드포인트 테스트
- [ ] 방 생성 API 테스트
- [ ] 게임 초기화 API 테스트

### Phase 4: 프론트엔드 테스트 ⏳
- [ ] 개발 서버 시작 (포트 5173)
- [ ] 로비 화면 렌더링 확인
- [ ] WebSocket 연결 확인
- [ ] 방 생성/참여 UI 테스트

### Phase 5: 통합 테스트 ⏳
- [ ] 2인 플레이 시나리오
- [ ] 4인 플레이 시나리오
- [ ] 찬스 카드 실행
- [ ] 최종 정산

---

## 🐛 발견된 문제

### 1. 데이터베이스 연결 실패 ❌
**증상**: `getaddrinfo ENOTFOUND db.xskaefoqkbwnhrpyptkl.supabase.co`

**원인 분석**:
- 네트워크 연결 문제
- Supabase 프로젝트 일시 중지
- 잘못된 호스트 주소

**해결 방법**:
1. Supabase 대시보드에서 프로젝트 상태 확인
2. 연결 정보 재확인
3. 프로젝트 재시작 (일시 중지된 경우)

---

## 🔧 수정 필요 사항

### 1. resolve_token 타입 변경
**현재**: BOOLEAN
**필요**: INT (0~2)

```sql
ALTER TABLE player_states 
ALTER COLUMN resolve_token TYPE INT 
USING (CASE WHEN resolve_token THEN 1 ELSE 0 END);
```

### 2. 초기 자금 확인
**필요**: 3,000TC (이미 코드에 반영됨 ✅)

### 3. 카드 데이터 업데이트
- 집안일 카드 수익 조정
- 여행 지원 카드 추가
- CH19 찬스 카드 추가

---

## 📝 테스트 체크리스트

### 기본 기능
- [ ] 방 생성
- [ ] 방 참여
- [ ] 게임 시작
- [ ] 플레이어 이동
- [ ] 행동 실행
- [ ] 턴 종료

### v4.1 신규 기능
- [ ] 2인 플레이 감지
- [ ] 찬스 칸 선택 (카드/500TC)
- [ ] 집안일 첫 방문 보너스
- [ ] 결심 토큰 회복 (7일차)
- [ ] 비주류 특성 변환
- [ ] 동률 규정 적용

### 에러 처리
- [ ] 잘못된 이동 차단
- [ ] 결심 토큰 부족 에러
- [ ] 2인 금지 카드 차단
- [ ] 턴 잠금 검증

---

## 🚀 다음 단계

### 즉시 실행
1. Supabase 연결 문제 해결
2. 데이터베이스 마이그레이션
3. 서버 실행 테스트

### 단기 목표
1. 로컬 환경에서 전체 플로우 테스트
2. 버그 수정
3. UI/UX 개선

### 중기 목표
1. 배포 환경 설정
2. 성능 최적화
3. 문서 업데이트

---

**작성일**: 2024-12-01
**상태**: 진행 중
