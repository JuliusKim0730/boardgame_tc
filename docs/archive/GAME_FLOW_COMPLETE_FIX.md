# 게임 플로우 완전 수정

## 문제 상황
1. 내 턴인데 "다른 사람 턴 대기중" 표시
2. 이동할 수 없음
3. 행동 선택 버튼이 표시되지 않음
4. 자동으로 행동이 수행되어 선택권이 없음

## 원인 분석

### guide_01.md 게임 규칙 확인
```
턴 진행 순서:
① 이동 (필수) - 인접한 칸으로 이동
② 행동 (필수) - 1~6번 중 선택하여 행동 수행
③ 추가 행동 (선택) - 결심 토큰 사용
```

**문제**: 이동 후 자동으로 행동이 수행되도록 구현되어 있었음
**올바른 방식**: 이동 후 플레이어가 1~6번 행동을 선택해야 함

## 수정 내용

### 1. GameScreen.tsx

#### handleMove() - 자동 행동 제거
```typescript
// 이전 (잘못된 방식)
const handleMove = async (position: number) => {
  await api.move(gameId, playerId, position);
  setHasMoved(true);
  
  // 자동으로 행동 수행 ❌
  setTimeout(() => {
    handleAction(position);
  }, 500);
};

// 수정 (올바른 방식)
const handleMove = async (position: number) => {
  await api.move(gameId, playerId, position);
  setHasMoved(true);
  setMessage(`${position}번 칸으로 이동했습니다. 행동을 선택하세요.`);
  // 자동 행동 제거 ✅
};
```

#### 행동 선택 UI 추가
```tsx
{/* 이동 후 행동 선택 버튼 표시 */}
{isMyTurn && hasMoved && !hasActed && (
  <div className="action-selection">
    <h3>행동 선택</h3>
    <div className="action-buttons">
      {[1, 2, 3, 4, 5, 6].map((action) => (
        <button
          key={action}
          className="btn-action"
          onClick={() => handleAction(action)}
        >
          {action}. {getActionName(action)}
        </button>
      ))}
    </div>
  </div>
)}
```

### 2. GameScreen.css

#### 행동 선택 버튼 스타일
```css
.action-selection {
  background: white;
  border-radius: 16px;
  padding: 24px;
  margin-top: 24px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.action-buttons {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.btn-action {
  padding: 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}
```

## 게임 플로우 (수정 후)

### 턴 진행 순서
```
1. 턴 시작
   - 메시지: "당신의 턴입니다! 이동할 칸을 선택하세요."
   - 인접한 칸이 밝게 표시됨 (펄스 애니메이션)
   
2. 이동 단계
   - 플레이어가 인접한 칸 클릭
   - 말이 해당 칸으로 이동
   - 메시지: "X번 칸으로 이동했습니다. 행동을 선택하세요."
   
3. 행동 선택 단계
   - 1~6번 행동 버튼이 표시됨
   - 플레이어가 원하는 행동 선택
   - 행동 수행 (카드 드로우, TC 획득 등)
   
4. 턴 종료
   - 자동으로 턴 종료 (1.5초 후)
   - 다음 플레이어에게 턴 넘김
```

### 행동 칸 설명
```
1번: 무료 계획 - 무료 계획 카드 1장 획득
2번: 조사하기 - 일반 계획 카드 1장 획득 (손패)
3번: 집안일 - 1,500~2,000TC 획득
4번: 여행 지원 - TC 변동 (±1,000~4,000TC)
5번: 찬스 - 찬스 카드 1장 획득
6번: 자유 행동 - 1~5번 중 선택
```

## UI 레이아웃

### 게임 화면 구조
```
┌─────────────────────────────────────────────────────┐
│ 🌙 열네 밤의 꿈  Day 1/14  🎯 내 여행지: 제주      │
├─────────────────────────────────────────────────────┤
│ 당신의 턴입니다! 이동할 칸을 선택하세요.  🎯 이동 필요 │
├──────────┬──────────────────────────┬───────────────┤
│          │                          │               │
│ 내 정보   │      게임 보드           │  내 카드 (0장) │
│ 💰 3,000TC│                          │               │
│ 📍 1번 칸 │   [게임 보드 SVG]        │  공동 계획    │
│ 🔥 1/2    │                          │  목표: 10,000TC│
│          │                          │               │
│ 플레이어  │  💡 인접한 칸을 클릭     │  [기여하기]   │
│ 목록      │                          │               │
│ 🎯 나 #1  │  ┌─────────────────┐   │               │
│ AI #2     │  │  행동 선택       │   │               │
│ AI #3     │  │                 │   │               │
│          │  │ [1. 무료 계획]  │   │               │
│          │  │ [2. 조사하기]   │   │               │
│          │  │ [3. 집안일]     │   │               │
│          │  │ [4. 여행 지원]  │   │               │
│          │  │ [5. 찬스]       │   │               │
│          │  │ [6. 자유 행동]  │   │               │
│          │  └─────────────────┘   │               │
└──────────┴──────────────────────────┴───────────────┘
```

## 테스트 시나리오

### 시나리오 1: 첫 턴 진행
1. ✅ 게임 시작 → "당신의 턴입니다!" 메시지 표시
2. ✅ 인접한 칸(2번) 밝게 표시
3. ✅ 2번 칸 클릭 → 이동 완료
4. ✅ 행동 선택 버튼 6개 표시
5. ✅ "2. 조사하기" 클릭 → 일반 계획 카드 획득
6. ✅ 자동으로 턴 종료
7. ✅ 다음 플레이어로 턴 넘김

### 시나리오 2: 6번 자유 행동
1. ✅ 6번 칸으로 이동
2. ✅ 행동 선택 버튼 표시
3. ✅ "6. 자유 행동" 클릭
4. ✅ 1~5번 중 선택 가능 (추가 UI 필요)

### 시나리오 3: AI 턴
1. ✅ AI 턴 시작 (5초 이내)
2. ✅ AI 자동 이동
3. ✅ AI 자동 행동 선택
4. ✅ AI 턴 종료
5. ✅ 다음 플레이어로 턴 넘김

## 남은 작업

### 필수
- [ ] 6번 자유 행동 선택 UI 구현
- [ ] 결심 토큰 사용 UI 구현
- [ ] 찬스 카드 효과 처리
- [ ] 2인 전용 규칙 (찬스 칸 500TC 선택)

### 선택
- [ ] 행동 칸 설명 툴팁
- [ ] 카드 효과 애니메이션
- [ ] 턴 진행 사운드 효과

## 다음 단계

1. 프론트엔드 재시작
2. 브라우저에서 테스트
3. 행동 선택 버튼이 표시되는지 확인
4. 턴 진행이 올바르게 작동하는지 확인
