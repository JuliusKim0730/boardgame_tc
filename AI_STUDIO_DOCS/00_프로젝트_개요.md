# 열네 밤의 꿈 - 프로젝트 개요

## 프로젝트 정보

**프로젝트명**: 열네 밤의 꿈 (Fourteen Nights Dream)  
**버전**: 4.1.0  
**타입**: 실시간 멀티플레이어 웹 보드게임  
**개발 기간**: 2024년 11월 ~ 12월  

## 게임 컨셉

14일 동안 여행 준비를 하며 가장 높은 행복 점수를 목표로 하는 보드게임입니다.

### 핵심 메커니즘
- **14일 턴제**: 각 플레이어가 14턴을 진행
- **6칸 보드**: 1~6번 칸을 순환하며 이동
- **카드 수집**: 계획 카드를 모아 최종 구매
- **특성 시스템**: 6가지 특성(맛, 역사, 자연, 문화, 여가, 물) + 추억
- **여행지 테마**: 각 플레이어마다 다른 여행지 (특성 가중치 다름)
- **공동 계획**: 모든 플레이어가 함께 달성하는 목표

### 플레이어 수
- **2~4인**: 기본 모드
- **2인 전용 규칙**: 찬스 칸에서 카드/돈 선택, 집안일 첫 방문 보너스

## 기술 스택

### Backend
- **Runtime**: Node.js 20+
- **Framework**: Express.js
- **Language**: TypeScript
- **Database**: PostgreSQL (Supabase)
- **Real-time**: Socket.io
- **Deployment**: Render.com

### Frontend
- **Framework**: React 18
- **Language**: TypeScript
- **Build Tool**: Vite
- **Styling**: CSS Modules
- **State**: React Hooks
- **Deployment**: Vercel

### 주요 라이브러리
```json
{
  "backend": {
    "express": "^4.18.2",
    "socket.io": "^4.6.1",
    "pg": "^8.11.3",
    "uuid": "^9.0.1",
    "dotenv": "^16.3.1"
  },
  "frontend": {
    "react": "^18.2.0",
    "socket.io-client": "^4.6.1",
    "axios": "^1.6.2"
  }
}
```

## 프로젝트 구조

```
boardgame-fourteen-nights/
├── backend/                    # 백엔드 서버
│   ├── src/
│   │   ├── db/                # 데이터베이스
│   │   │   ├── pool.ts        # DB 연결 풀
│   │   │   ├── schema.sql     # 스키마 정의
│   │   │   └── seedCards.sql  # 카드 데이터
│   │   ├── routes/            # API 라우트
│   │   │   ├── roomRoutes.ts  # 방 관리 API
│   │   │   └── gameRoutes.ts  # 게임 플레이 API
│   │   ├── services/          # 비즈니스 로직
│   │   │   ├── RoomService.ts
│   │   │   ├── GameSetupService.ts
│   │   │   ├── TurnService.ts
│   │   │   ├── TurnManager.ts
│   │   │   ├── ChanceService.ts
│   │   │   ├── JointPlanService.ts
│   │   │   ├── GameFinalizationService.ts
│   │   │   ├── AIPlayerService.ts
│   │   │   └── AIScheduler.ts
│   │   ├── ws/                # WebSocket
│   │   │   └── gameSocket.ts
│   │   └── server.ts          # 서버 엔트리
│   ├── .env                   # 환경 변수
│   └── package.json
│
├── frontend/                   # 프론트엔드
│   ├── src/
│   │   ├── components/        # React 컴포넌트
│   │   │   ├── LobbyScreen.tsx
│   │   │   ├── WaitingRoom.tsx
│   │   │   ├── GameScreen.tsx
│   │   │   ├── GameBoard.tsx
│   │   │   ├── PlayerInfo.tsx
│   │   │   ├── HandCards.tsx
│   │   │   ├── ActionLog.tsx
│   │   │   ├── ResultScreen.tsx
│   │   │   ├── CardDrawModal.tsx
│   │   │   ├── ChanceModal.tsx
│   │   │   ├── ContributeModal.tsx
│   │   │   └── TraitConversionModal.tsx
│   │   ├── services/          # API & Socket
│   │   │   ├── api.ts
│   │   │   └── socket.ts
│   │   ├── utils/             # 유틸리티
│   │   │   └── storage.ts
│   │   ├── App.tsx            # 메인 앱
│   │   └── main.tsx           # 엔트리
│   └── package.json
│
├── shared/                     # 공통 타입
├── docs/                       # 문서
├── workflows/                  # 워크플로우 문서
├── rulebook/                   # 게임 룰북
└── AI_STUDIO_DOCS/            # AI Studio 참고 문서
    ├── 00_프로젝트_개요.md
    ├── 01_데이터베이스_구조.md
    ├── 02_백엔드_아키텍처.md
    ├── 03_프론트엔드_구조.md
    ├── 04_게임_플로우.md
    ├── 05_API_명세.md
    ├── 06_카드_시스템.md
    └── 07_개발_가이드.md
```

## 개발 현황

### 완료된 기능 (95%)
✅ 데이터베이스 스키마 및 마이그레이션  
✅ 방 생성/참여 시스템  
✅ 게임 초기화 (여행지 배정, 덱 생성)  
✅ 턴 시스템 (이동, 행동, 턴 종료)  
✅ 턴 락 메커니즘 (동시성 제어)  
✅ 카드 시스템 (107장 전체 구현)  
✅ 찬스 카드 상호작용 (25장)  
✅ 공동 계획 기여 시스템  
✅ 최종 정산 (구매, 특성 변환, 점수 계산)  
✅ AI 플레이어 (자동 플레이)  
✅ WebSocket 실시간 동기화  
✅ 프론트엔드 UI (모든 화면)  
✅ 2인 전용 규칙  

### 미완성/선택 기능
⏳ AFK/접속 끊김 처리  
⏳ 리플레이 시스템  
⏳ 통계/랭킹 시스템  
⏳ 테스트 코드  

## 배포 환경

### Production
- **Frontend**: https://boardgame-tc-frontend.vercel.app
- **Backend**: https://boardgame-backend-xxxx.onrender.com
- **Database**: Supabase (PostgreSQL)

### Development
- **Frontend**: http://localhost:3000
- **Backend**: http://localhost:4000
- **Database**: Local PostgreSQL or Supabase

## 주요 문서

### 게임 규칙
- `rulebook/게임_규칙.md` - 전체 게임 규칙
- `CARD_CODES.md` - 카드 코드 및 효과

### 개발 가이드
- `QUICK_START_UPDATED.md` - 빠른 시작 가이드
- `LOCAL_ISSUE_FIX_GUIDE.md` - 로컬 실행 이슈 해결
- `DATABASE_MIGRATION_GUIDE.md` - DB 마이그레이션

### 워크플로우
- `workflows/1.00_로비_방관리.md`
- `workflows/2.00_게임세팅_초기화.md`
- `workflows/3.00_턴루프_카드행동.md`
- `workflows/4.00_최종정산_리플레이.md`
- `workflows/5.00_동시성_예외복구.md`

### 구현 완료 보고서
- `FINAL_COMPLETION_REPORT_V4.1.md` - 최종 완료 보고서
- `IMPLEMENTATION_COMPLETE_V4.1.md` - 구현 완료 상세
- `AI_PLAYER_ALGORITHM_COMPLETE.md` - AI 알고리즘
- `HAND_CARDS_AND_AI_FIX.md` - 최근 수정 사항

## 다음 단계

이 문서를 기반으로 다음 문서들을 참고하세요:
1. `01_데이터베이스_구조.md` - DB 스키마 상세
2. `02_백엔드_아키텍처.md` - 서비스 구조
3. `03_프론트엔드_구조.md` - 컴포넌트 구조
4. `04_게임_플로우.md` - 게임 진행 흐름
5. `05_API_명세.md` - REST API & WebSocket
6. `06_카드_시스템.md` - 카드 데이터 및 로직
7. `07_개발_가이드.md` - 추가 개발 가이드
